<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
    
    <script>
        /**
         * * CREDENTIALS
         * 
         * Uma solicitação de origem cruzada(request cross-origin) iniciada por código JavaScript por padrão não traz nenhuma credencial (cookies ou autenticação HTTP).
         * 
         * Isso é incomum para solicitações HTTP. Normalmente, uma solicitação para http://site.com é acompanhada por todos os cookies desse domínio. Por outro lado, solicitações de origem cruzada feitas por métodos JavaScript são uma exceção.
         * 
         * Por exemplo, fetch('http://another.com')não envia cookies, mesmo aqueles (!) que pertencem ao another.com domínio.
         * 
         * Por quê?
         * 
         * Isso porque uma solicitação com credenciais é muito mais poderosa do que sem elas. Se permitido, ele concede ao JavaScript o poder total de agir em nome do usuário e acessar informações confidenciais usando suas credenciais.
         * 
         * O servidor realmente confia tanto no script? Em seguida, deve permitir explicitamente solicitações com credenciais com um cabeçalho adicional.
         * 
         * Para enviar credenciais em fetch, precisamos adicionar a opção credentials: "include", assim:
        */

        fetch('http://another.com', {
            credentials: "include"
        });

        /**
         * Agora fetch envia cookies provenientes de another.com solicitação para esse site.
         * 
         * Se o servidor concordar em aceitar a solicitação com credenciais , ele deverá adicionar um cabeçalho Access-Control-Allow-Credentials: true à resposta, além de Access-Control-Allow-Origin.
         * 
         * Por exemplo:
         
            200 OK
            Access-Control-Allow-Origin: https://javascript.info
            Access-Control-Allow-Credentials: true        

         * Atenção: Access-Control-Allow-Origin é proibido usar estrela *para pedidos com credenciais. Como mostrado acima, deve fornecer a origem exata lá. Essa é uma medida de segurança adicional, para garantir que o servidor realmente saiba em quem confia para fazer tais solicitações.
         * */
    </script>

</body>
</html>