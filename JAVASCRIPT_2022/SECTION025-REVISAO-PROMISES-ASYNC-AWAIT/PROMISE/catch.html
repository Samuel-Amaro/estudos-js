<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>
    
    <script type="text/javascript">
        /**
         * * CATCH(PEGUE)
         * 
         * Se estamos interessados ​​apenas em erros, podemos usar null como primeiro argumento: .then(null, errorHandlingFunction). Ou podemos usar .catch(errorHandlingFunction), que é exatamente o mesmo:
        */
       
        //sintaxe do construtor para um objeto promisse
        //o argumento passado para o construtor promisse e uma callback chamada de executor, que e executado automaticamente, o excutor tenta executar algum trabalho
        //os argumentos do callback executor são outros callbacks chamados de resolve e reject, fornecidos pelo proprio javascript
        //se ao terminar a tentativa de realizar o trabalho o excutor pode chamar resolve(value) se o trabalho for concluido com sucesso
        //ou reject(error) se ocorreu um erro
        //o nosso codigo esta apenas dentro do executor
        //exemplo abaixo de uma promise rejeitada - promisse reject
        let promise = new Promise(function(resolve, reject) {
            //executor realizando tentativa de executar trabalho
            //a função executor é executada automaticamente quando a promessa é construída
            //a function callback executor e chamada automaticamente e imediatamente por new Promisse
            // após 1 segundo sinaliza que o trabalho está concluído(finalizado) com um error
            //trabalho não conlcuido
            //apos passar 1 segundo o trabalho foi finalizado e chamamos reject com o objeto error, passando o objeto error com mensagem para sinalizar que houve um erro no trabalho
            //assim a promisse muda seu state propriedade para "reject" e seu result propriedade para error objeto
            //apos 1 segundo altera o estado da promisse para reject
            // após 1 segundo sinaliza que o trabalho foi finalizado com erro
            setTimeout(() => reject(new Error("Whoops!")), 1000);
        });

        //registrando função consumidora que recebe o erro da promessa rejeitada, consome a promessa rejeitada, obtemo erro
        //a function consumidora do erro e o .catch que aceita como argumento uma callback function manipuladora
        //aqui passamos alert para mostrar o erro
        // .catch(f) e o mesmo que promise.then(null, f);
        promise.catch(alert); //mostra: "Error: Whoops!" depois de 1 segundo

        /**
         * A chamada .catch(f) é um análogo completo de .then(null, f), é apenas uma abreviação
        */
    </script>

</body>
</html>