<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <title>Exemplo da instrução throw</title>
</head>
<body>

    <script>

        /**
         * * EXEMPLOS DE LANÇAMENTO(THROW) DE EXCEÇÃO DE JS
         * 
         * Vamos dar alguns exemplos de uso da throw declaração.
         * 
         * * 3) USANDO A INSTRUÇÃO THROW DO JS PARA LANÇAR UMA EXCEÇÃO DEFINIDA PELO USUÁRIO
         * 
         * Às vezes, você deseja lançar um erro personalizado em vez do class Error. Para fazer isso, você pode definir uma classe de erro personalizada que estende a Error classe e lança uma nova instância dessa classe. Por exemplo:
         * 
         * Primeiro, defina o NumberError que estende a Error classe:
        */

        //definindo uma class de Erro personalizado
        //define um class chamada NumberError que extende da class Error, isso e a class NumberError herdara tudo da class Error
        class NumberError extends Error{
            //define uma construtor para a class NumberError, o construtor define um paramentro chamado value
            constructor(value) {
                //invoca o contrutor da super classe, da classe pai, da classe base, a class Error, passando um argumento
                super(`"${value}" não é um número válido`);
                //declara uma propriedade chamada name e a inicializa com uma string literal
                this.name = 'InvalidNumber';
            }
        }

        /**
         * O constructor() da NumberError classe aceita um valor que você passará para ele ao criar uma nova instância da classe.
         * 
         * No constructor() da classe NunberError, chamamos o construtor da classe Error via super e passamos uma string para ele. Além disso, substituímos o nome do erro pela string literal NumberError. Se não fizermos isso, o nome do NumberError será Error.
         * 
         * Segundo, use a NumberError classe na add()função:
        */

        //declara uma function chamada add que declara dois paramentros chamados x e y
        function add(x, y) {
            //se o tipo de dado do argumento x não for number
            if(typeof x !== 'number') {
                //lança uma exceção, o valor da exceção e uma instancia de objeto anonima da class NumberError, uma class de erro personalizada
                //que passamos um argumento para seu construtor
                //o mecanismo JS para a execução e passa o controle para o primeiro bloco catch encontrado na pilha de chamadas, se não exisitir nenhum bloco catch o Js encerra a execução do script
                throw new NumberError(y);
            }
            if(typeof y !== 'number') {
                //lança uma exceção, o valor da exceção e uma instancia anonima de objeto da class, NumberError, uma class de erro personalizada, que passamos um argumento para seu construtor
                throw new NumberError(y);
            }

            return x + y;
        }

        /**
         * Na add() função, lançamos uma instância da NumberError classe se o argumento não for um número válido.
         * 
         * Terceiro, capture a exceção lançada pela add() função:
        */

        //usando a instrução try...catch para lidar com erros e exceções e manipulalos
        try{
            //o codigo que gera o erro vai aqui
            //invoca a function add, passando dois argumentos, o primeiro argumento e uma string literal o segundo e um valor numerico 10, passar um argumento que não seja do tipo number faz a function lançar um exceção, de proposito passaremos uma argumento de tipo string literal para que seje lançado uma exceção para ser tratada no bloco catch
            const result = add('a', 10);
            console.log(result);
        }catch(e) {
            //a logica de tratamento do erro vai aqui
            //usando o indentificador de exceção a variavel e recebe o objeto de exceção personalizado lançado no bloco try, que e uma instancia de objeto anonima da class NumberError 
            //usando a propriedades do objeto de exceção para obter mais detalhes do erro e exceção gerados
            console.log(e.name, ':', e.message);
        }

        /**
         * Neste exemplo, o nome da exceção é NumberError e a mensagem é aquela que passamos para a super() classe .constructor() NumberError
         * 
         * * RESUMO
         * 
         * Use a instrução JavaScript throw para lançar uma exceção definida pelo usuário.
        */
       
    </script>

</body>
</html>