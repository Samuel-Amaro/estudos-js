<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body>

    <p id="p">Exemplo: <i>itálico</i> e <b>negrito</b></p>

    <!--
    no de elemento como um todo
    <p id="p">       no de elemento completo <p>
        Exemplo:     no de texto com indice 0 como numero filho <p>
        <i>          no de elemento com indice 1 como numero filho <p>
            itálico  no de texto como numero filho 0 de <i>
        </i>    
        e            no de texto com indice 2 como numero filho <p>
        <b>          no de elemento com indice 3 como numero filho <p>
            negrito  no de texto como numero filho 0 de <b>
        </b>
    </p>
    -->

    <label for="from">De</label>
    <input type="text" id="from" disabled/>
    <label for="to">To</label>
    <input type="text" id="to" disabled/>

    <script type="text/javascript">
        /**
         * * DEMOSTRAÇÃO DE RASTREAMENTO DE SELEÇÃO
         * 
         * Aqui está uma pequena demonstração. Ele rastreia a seleção atual no document e mostra seus limites:
        */

        //atribuindo um manipulador de evento por meio da propriedade dom
        //o manipulador de evento e para o evento de seleção, ele e acionado sempre que uma seleção e iniciada ou alterada no documento, rastrea todas as seleções do documento.
        document.onselectionchange = function(event) {
            //obtem o objeto selection
            let selection = document.getSelection();
            //obtem as propriedades do objeto selection, usando a desestruturação de objeto em cada variavel e uma propriedade do objeto
            let {anchorNode, anchorOffset, focusNode, focusOffset} = selection;
            //anchorNode e focusNode são nós de texto geralmente
            //verifica se anchorNode ou focusNode não são null ou undefined antes de acessar os seus valores, verifica se os elementos existem antes de acessar seu conteudo
            //anchorNode = o no onde começa a seleção
            //anchorOffset = o deslocamento onde a seleção começa
            //focusNode = o no onde a seleção termina
            //focusOffset = o deslocamento onde a seleção termina
            from.value = `${anchorNode?.data}, offset ${anchorOffset}`;
            to.value = `${focusNode?.data}, offset ${focusOffset}`;
        };

    </script>
</body>
</html>